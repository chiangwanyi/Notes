# 以太网

**Ethernet**，当今主导地位的局域网组网技术。数据链路层通常使用**Ethernet Type II**协议。

数据链路层包含了两个子层：**LLC**子层与**MAC**子层。

- LLC，Logical Link Control，**逻辑链路控制**，负责识别网络层的协议类型，接收上层数据包封装成帧后向下层传递。

- MAC，Media Access Control，**介质访问控制**，负责控制与连接物理层的物理介质，处理硬件设备的物理寻址、定义网络拓扑及数据帧的传递顺序。

## 以太网帧的结构

![image-20210601095032298](../../../assets/image-20210601095032298.png)

### 前导码

前导码长度为7个字节，每一个字节固定为`10101010`。

### 帧开始符

帧开始符长度为1个字节，为`10101011`。

### 以太类型

以太类型长度为2个字节，代表了在以太网帧中封装了何种协议，即上一层的协议，常见的以太类型如下表所示。

| 以太类型编号 | 协议                               |
| ------------ | ---------------------------------- |
| 0x0800       | Internet Protocol version 4 (IPv4) |
| 0x0806       | Address Resolution Protocol (ARP)  |
| 0x86DD       | Internet Protocol Version 6 (IPv6) |

### MTU

最大传输单元（Maximum Transmission Unit），即每次发送数据的最大长度，在以太网中默认为**1500字节**。

### 帧校验码

帧校验码（FCS）是一个**32位**（4字节）循环冗余校验码，发送方将计算出的FCS置于报文中，接收方接收到报文后通过对比重新计算得到的FCS与发送方传入的FCS是否相同判断帧数据是否被损坏。

## 帧大小范围

由于以太帧的数据（Payload）部分的长度最小为64字节，最大为1500字节，因此正常的以太帧大小范围为**68 ~ 1518**。

## MAC

MAC地址由两部分组成，前24位代表供应商代码（OUI），由IEEE管理和分配，后24位代表序列号，由供应商自行分配。

> OUI查询：http://standards-oui.ieee.org/oui/oui.txt

